{% if "tv" in context.metadata.ir_targets %}
    <!-- TV Remote -->
    <div id="ir-tv" class="d-flex flex-column remote mx-auto mb-4">
        <div class="row text-center">
            <h4 class="my-2">TV Remote</h4>
        </div>
        <div class="d-flex flex-row pb-3 mx-auto">
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'power'});" title="Power"><i class="bi-power"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" style="visibility: hidden;"><i class="bi-question"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'source'});" title="Source"><i class="bi-upload"></i></button>
        </div>
        <div class="d-flex flex-row mx-auto">
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" style="visibility: hidden;"><i class="bi-question"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'up'});" title="Up"><i class="bi bi-arrow-up"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" style="visibility: hidden;"><i class="bi-question"></i></button>
        </div>
        <div class="d-flex flex-row mx-auto">
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'left'});" title="Left"><i class="bi bi-arrow-left"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'enter'});" title="Enter"><i class="bi bi-app"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'right'});" title="right"><i class="bi bi-arrow-right"></i></button>
        </div>
        <div class="d-flex flex-row pb-3 mx-auto">
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" style="visibility: hidden;"><i class="bi-question"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'down'});" title="Down"><i class="bi bi-arrow-down"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" style="visibility: hidden;"><i class="bi-question"></i></button>
        </div>
        <div class="d-flex flex-row mx-auto">
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'vol_down'});" title="Volume Down"><i class="bi-volume-down-fill"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'mute'});" title="Mute"><i class="bi-volume-mute-fill"></i></button>
            <button class="col m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'vol_up'});" title="Volume Up"><i class="bi-volume-up-fill"></i></button>
        </div>
        <div class="d-flex flex-row mx-auto">
            <button class="col m-3 btn btn-lg btn-secondary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'settings'});" title="Settings"><i class="bi-gear-fill"></i></button>
            <button class="col m-3 btn btn-lg btn-secondary ir-btn" type="button" style="visibility: hidden;"><i class="bi-question"></i></button>
            <button class="col m-3 btn btn-lg btn-secondary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'tv', 'key': 'exit'});" title="Exit"><i class="bi-arrow-return-left"></i></button>
        </div>
    </div>
{% endif %}

{% if "ac" in context.metadata.ir_targets %}
    <!-- AC Remote -->
    <div class="d-flex flex-column remote mx-auto mb-4">
        <div class="row text-center">
            <h4 class="my-2">AC Remote</h4>
        </div>
        <div class="d-flex flex-row my-2 mx-auto">
            <button class="m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'ac', 'key': 'stop'});" title="Stop cooling"><i class="bi-wind"></i></button>
            <button class="m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'ac', 'key': 'off'});" title="Turn off fan"><i class="bi-x-octagon-fill"></i></button>
            <button class="m-3 btn btn-lg btn-primary ir-btn" type="button" onclick="send_command({'command': 'ir', 'ir_target': 'ac', 'key': 'start'});" title="Start cooling"><i class="bi-snow"></i></i></button>
        </div>
    </div>
{% endif %}

<!-- IR Macros -->
<div class="d-flex flex-column remote mx-auto mb-4">
    <div class="row text-center">
        <h4 class="my-2">IR Macros</h4>
    </div>

    <!-- Add button for each configured macro -->
    {% for name, actions in context.metadata.ir_macros.items %}
        <div class="d-flex flex-row my-2">
            <div class="btn-group w-100 mx-3" role="group">
                <button type="button" class="btn btn-lg btn-primary w-100" onclick="send_command({'command': 'ir_run_macro', 'macro_name': '{{name}}'})">{{name}}</button>
                <button type="button" class="btn btn-lg btn-success" onclick="populate_edit_modal(this);" data-name="{{name}}" data-actions="{{actions}}"><i class="bi-pencil"></i></button>
            </div>
        </div>
    {% endfor %}

    <!-- Record macro collapse -->
    <button class="btn btn-secondary my-3 mx-auto" type="button" data-bs-toggle="collapse" data-bs-target="#record-macro-menu" aria-expanded="false" aria-controls="record-macro-menu"><i class="bi-plus-lg"></i></button>
    <div class="collapse" id="record-macro-menu">
        <div class="px-3 pb-3 d-flex flex-column">
            <div class="form-floating mb-3">
                <input type="text" class="form-control" id="new-macro-name" placeholder="" autocomplete='off'>
                <label for="new-macro-name">New macro name</label>
            </div>
            <button id="start-recording" class="btn btn-success mx-auto" type="button" autocomplete="off" onclick="start_recording_ir_macro()">Start Recording</button>
        </div>
    </div>
</div>
