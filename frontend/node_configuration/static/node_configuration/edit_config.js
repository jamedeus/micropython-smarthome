(()=>{"use strict";var e={222:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(81),a=n.n(r),o=n(645),l=n.n(o)()(a());l.push([e.id,"/* Define the initial state and the transition */\n.fade-enter {\n    opacity: 0;\n    transition: opacity 400ms ease;\n}\n\n.fade-enter-active {\n    opacity: 1;\n}\n\n.fade-exit {\n    opacity: 1;\n    transition: opacity 400ms ease;\n}\n\n.fade-exit-active {\n    opacity: 0;\n}\n",""]);const c=l},645:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",r=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),r&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),r&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,r,a,o){"string"==typeof e&&(e=[[null,e,void 0]]);var l={};if(r)for(var c=0;c<this.length;c++){var i=this[c][0];null!=i&&(l[i]=!0)}for(var u=0;u<e.length;u++){var s=[].concat(e[u]);r&&l[s[0]]||(void 0!==o&&(void 0===s[5]||(s[1]="@layer".concat(s[5].length>0?" ".concat(s[5]):""," {").concat(s[1],"}")),s[5]=o),n&&(s[2]?(s[1]="@media ".concat(s[2]," {").concat(s[1],"}"),s[2]=n):s[2]=n),a&&(s[4]?(s[1]="@supports (".concat(s[4],") {").concat(s[1],"}"),s[4]=a):s[4]="".concat(a)),t.push(s))}},t}},81:e=>{e.exports=function(e){return e[1]}},379:e=>{var t=[];function n(e){for(var n=-1,r=0;r<t.length;r++)if(t[r].identifier===e){n=r;break}return n}function r(e,r){for(var o={},l=[],c=0;c<e.length;c++){var i=e[c],u=r.base?i[0]+r.base:i[0],s=o[u]||0,m="".concat(u," ").concat(s);o[u]=s+1;var p=n(m),f={css:i[1],media:i[2],sourceMap:i[3],supports:i[4],layer:i[5]};if(-1!==p)t[p].references++,t[p].updater(f);else{var d=a(f,r);r.byIndex=c,t.splice(c,0,{identifier:m,updater:d,references:1})}l.push(m)}return l}function a(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,a){var o=r(e=e||[],a=a||{});return function(e){e=e||[];for(var l=0;l<o.length;l++){var c=n(o[l]);t[c].references--}for(var i=r(e,a),u=0;u<o.length;u++){var s=n(o[u]);0===t[s].references&&(t[s].updater(),t.splice(s,1))}o=i}}},569:e=>{var t={};e.exports=function(e,n){var r=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");r.appendChild(n)}},216:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},565:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},795:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var r="";n.supports&&(r+="@supports (".concat(n.supports,") {")),n.media&&(r+="@media ".concat(n.media," {"));var a=void 0!==n.layer;a&&(r+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),r+=n.css,a&&(r+="}"),n.media&&(r+="}"),n.supports&&(r+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(r+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(r,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},589:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={id:r,exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.nc=void 0,(()=>{const e=React;var t=n.n(e);const r=ReactDOM;var a=n.n(r);const o=function(e){var n=e.children,r=e.label;return t().createElement("div",{className:"mb-2"},t().createElement("label",{className:"w-100"},t().createElement("b",null,r,":"),n))},l=function(e){e.key;var n=e.param,r=e.value,a=e.onChange;return t().createElement(o,{label:"Nickname"},t().createElement("input",{type:"text",className:"form-control nickname",placeholder:"",value:r,onChange:function(e){return a(n,e.target.value)},required:!0}))},c=function(e){e.key;var n=e.param,r=e.value,a=e.onChange;return t().createElement(o,{label:"IP"},t().createElement("input",{type:"text",className:"form-control ip-input validate",placeholder:"",value:r,pattern:"^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.){3}(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$",onChange:function(e){return a(n,e.target.value)},required:!0}))},i=function(e){e.key;var n=e.param,r=e.value,a=e.onChange;return t().createElement(o,{label:"URI"},t().createElement("input",{type:"text",className:"form-control validate",placeholder:"IP address or URL",value:r,pattern:"(?:(?:http|https):\\/\\/)?(?:\\S+(?::\\S*)?@)?(?:(?:[0-9]{1,3}\\.){3}[0-9]{1,3})(?::\\d{1,5})?|(?:(?:http|https):\\/\\/)?[a-zA-Z0-9.]+(?:-[a-zA-Z0-9]+)*(?:\\.[a-zA-Z]{2,6})+(?:\\/\\S*)?",onChange:function(e){return a(n,e.target.value)},required:!0}))},u=function(e){e.key,e.param;var n=e.on_path,r=e.off_path,a=e.onChange;return t().createElement(t().Fragment,null,t().createElement(o,{label:"On path"},t().createElement("input",{type:"text",className:"form-control validate",placeholder:"Appended to URI for on action",value:n,onChange:function(e){return a("on_path",e.target.value)},required:!0})),t().createElement(o,{label:"Off path"},t().createElement("input",{type:"text",className:"form-control validate",placeholder:"Appended to URI for off action",value:r,onChange:function(e){return a("off_path",e.target.value)},required:!0})))},s=function(e){e.key,e.param;var n=e.mode,r=e.units,a=e.tolerance,l=e.onChange;return t().createElement(t().Fragment,null,t().createElement(o,{label:"Mode"},t().createElement("select",{className:"form-select",value:n,onChange:function(e){return l("mode",e.target.value)},required:!0},t().createElement("option",{value:"cool"},"Cool"),t().createElement("option",{value:"heat"},"Heat"))),t().createElement(o,{label:"Units"},t().createElement("select",{className:"form-select",value:r,onChange:function(e){return l("units",e.target.value)},required:!0},t().createElement("option",{value:"fahrenheit"},"Fahrenheit"),t().createElement("option",{value:"celsius"},"Celsius"),t().createElement("option",{value:"kelvin"},"Kelvin"))),t().createElement(o,{label:"Tolerance"},t().createElement("input",{type:"text",className:"form-control thermostat",placeholder:"",value:a,onChange:function(e){return l("tolerance",e.target.value)},required:!0})))},m=function(e){e.key;var n=e.param,r=e.value,a=e.onChange;return t().createElement(o,{label:"Pin"},t().createElement("select",{className:"form-select pin-select",value:r,autoComplete:"off",onChange:function(e){return a(n,e.target.value)},required:!0},t().createElement("option",null,"Select pin"),t().createElement("option",{value:"4"},"4"),t().createElement("option",{value:"5"},"5"),t().createElement("option",{value:"13"},"13"),t().createElement("option",{value:"14"},"14"),t().createElement("option",{value:"15"},"15"),t().createElement("option",{value:"16"},"16"),t().createElement("option",{value:"17"},"17"),t().createElement("option",{value:"18"},"18"),t().createElement("option",{value:"19"},"19"),t().createElement("option",{value:"21"},"21"),t().createElement("option",{value:"22"},"22"),t().createElement("option",{value:"23"},"23"),t().createElement("option",{value:"25"},"25"),t().createElement("option",{value:"26"},"26"),t().createElement("option",{value:"27"},"27"),t().createElement("option",{value:"32"},"32"),t().createElement("option",{value:"33"},"33"),t().createElement("option",{value:"34"},"34"),t().createElement("option",{value:"35"},"35"),t().createElement("option",{value:"36"},"36"),t().createElement("option",{value:"39"},"39")))},p=function(e){e.key;var n=e.param,r=e.value,a=e.onChange;return t().createElement(o,{label:"Pin"},t().createElement("select",{className:"form-select pin-select",value:r,autoComplete:"off",onChange:function(e){return a(n,e.target.value)},required:!0},t().createElement("option",null,"Select pin"),t().createElement("option",{value:"4"},"4"),t().createElement("option",{value:"13"},"13"),t().createElement("option",{value:"16"},"16"),t().createElement("option",{value:"17"},"17"),t().createElement("option",{value:"18"},"18"),t().createElement("option",{value:"19"},"19"),t().createElement("option",{value:"21"},"21"),t().createElement("option",{value:"22"},"22"),t().createElement("option",{value:"23"},"23"),t().createElement("option",{value:"25"},"25"),t().createElement("option",{value:"26"},"26"),t().createElement("option",{value:"27"},"27"),t().createElement("option",{value:"32"},"32"),t().createElement("option",{value:"33"},"33")))},f=function(e){e.key;var n=e.param,r=e.value,a=e.onChange;return t().createElement("div",{className:"mb-2"},t().createElement("label",{className:"w-100"},t().createElement("b",null,"Default Rule:"),t().createElement("select",{className:"form-select",value:r,autoComplete:"off",onChange:function(e){return a(n,e.target.value)},required:!0},t().createElement("option",{disabled:!0},"Select default rule"),t().createElement("option",{value:"enabled"},"Enabled"),t().createElement("option",{value:"disabled"},"Disabled"))))},d=function(e){e.key;var n=e.param,r=e.value,a=e.metadata,l=e.onChange;return t().createElement(o,{label:"Default Rule"},t().createElement("div",{className:"d-flex flex-row align-items-center my-2"},t().createElement("button",{className:"btn btn-sm me-1","data-direction":"down","data-stepsize":"0.5"},t().createElement("i",{className:"bi-dash-lg"})),t().createElement("input",{type:"range",className:"mx-auto",min:a.rule_limits[0],max:a.rule_limits[1],"data-displaymin":a.rule_limits[0],"data-displaymax":a.rule_limits[1],"data-displaytype":"float",step:"0.5",value:r,onChange:function(e){return l(n,e.target.value)},autoComplete:"off"}),t().createElement("button",{className:"btn btn-sm ms-1","data-direction":"up","data-stepsize":"0.5"},t().createElement("i",{className:"bi-plus-lg"}))))},v=function(e){var n=e.key,r=e.param,a=e.value,l=e.min,c=e.max,i=e.metadata,u=e.onChange;return t().createElement(t().Fragment,null,t().createElement(o,{label:"Default Rule"},t().createElement("div",{className:"d-flex flex-row align-items-center my-2"},t().createElement("button",{className:"btn btn-sm me-1","data-direction":"down","data-stepsize":"1"},t().createElement("i",{className:"bi-dash-lg"})),t().createElement("input",{type:"range",className:"mx-auto",min:i.rule_limits[0],max:i.rule_limits[1],"data-displaymin":"1","data-displaymax":"100","data-displaytype":"int",step:"1",value:a,onChange:function(e){return u(r,e.target.value)},autoComplete:"off"}),t().createElement("button",{className:"btn btn-sm ms-1","data-direction":"up","data-stepsize":"1"},t().createElement("i",{className:"bi-plus-lg"})))),t().createElement("div",{className:"mt-3 text-center"},t().createElement("a",{className:"text-decoration-none text-dim","data-bs-toggle":"collapse",href:"#".concat(n,"-advanced_settings"),role:"button","aria-expanded":"false","aria-controls":"".concat(n,"-advanced_settings")},"Advanced")),t().createElement("div",{id:"".concat(n,"-advanced_settings"),className:"collapse"},t().createElement(o,{label:"Min brightness"},t().createElement("input",{type:"text",className:"form-control rule-limits",value:l,"data-min":i.rule_limits[0],"data-max":i.rule_limits[1],onChange:function(e){return u("min_rule",e.target.value)},required:!0})),t().createElement(o,{label:"Max brightness"},t().createElement("input",{type:"text",className:"form-control rule-limits",value:c,"data-min":i.rule_limits[0],"data-max":i.rule_limits[1],onChange:function(e){return u("max_rule",e.target.value)},required:!0}))))},y=function(e){e.key;var n=e.param,r=e.value,a=e.onChange;return t().createElement(o,{label:"Default Rule"},t().createElement("select",{className:"form-select",value:r,autoComplete:"off",onChange:function(e){return a(n,e.target.value)},required:!0},t().createElement("option",{disabled:!0},"Select default rule"),t().createElement("option",{value:"on"},"On"),t().createElement("option",{value:"off"},"Off")))},h=function(e){var n=e.key,r=(e.param,e.value),a=e.onChange;return t().createElement(t().Fragment,null,t().createElement("div",{className:"mb-2 text-center"},t().createElement("button",{id:"".concat(n,"-default_rule-button"),className:"btn btn-secondary mt-3",type:"button"},"Set rule")),t().createElement("div",{className:"d-none"},t().createElement("input",{type:"text",id:"".concat(n,"-default_rule-button"),value:r,onChange:function(e){return a(id,e.target.value)},required:!0})))};function b(e){return b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},b(e)}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x(r.key),r)}}function C(e,t){return C=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},C(e,t)}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e){return N=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},N(e)}function _(e,t,n){return(t=x(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e){var t=function(e,t){if("object"!==b(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==b(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===b(t)?t:String(t)}const S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&C(e,t)}(S,e);var n,r,a,o,x=(a=S,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=N(a);if(o){var n=N(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===b(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return O(e)}(this,e)});function S(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,S);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return _(O(e=x.call.apply(x,[this].concat(r))),"renderInputs",(function(n,r,a,o){var f=[];return void 0!==r.nickname&&f.push(t().createElement(l,{key:n,param:"nickname",value:r.nickname,onChange:e.props.onInputChange})),void 0!==r.pin&&(void 0===r.targets?f.push(t().createElement(p,{key:n,param:"pin",value:r.pin,onChange:e.props.onInputChange})):f.push(t().createElement(m,{key:n,param:"pin",value:r.pin,onChange:e.props.onInputChange}))),void 0!==r.ip&&f.push(t().createElement(c,{key:n,param:"ip",value:r.ip,onChange:e.props.onInputChange})),void 0!==r.uri&&f.push(t().createElement(i,{key:n,param:"uri",value:r.uri,onChange:e.props.onInputChange})),void 0!==r.on_path&&void 0!==r.off_path&&f.push(t().createElement(u,{key:n,param:"on_off_path",on_path:r.on_path,off_path:r.off_path,onChange:e.props.onInputChange})),f.push(e.renderRuleInput(n,r,a,o)),void 0!==r.mode&&void 0!==r.units&&f.push(t().createElement(s,{key:n,param:"thermostat",mode:r.mode,units:r.units,tolerance:r.tolerance,onChange:e.props.onInputChange})),f})),_(O(e),"renderRuleInput",(function(n,r,a,o){if(void 0===r._type)return null;var l=o["".concat(a,"s")][r._type];switch(l.rule_prompt){case"standard":return t().createElement(f,{key:n,param:"default_rule",value:r.default_rule,onChange:e.props.onInputChange});case"on_off":return t().createElement(y,{key:n,param:"default_rule",value:r.default_rule,onChange:e.props.onInputChange});case"float_range":return t().createElement(d,{key:n,param:"default_rule",value:r.default_rule,metadata:l,onChange:e.props.onInputChange});case"int_or_fade":return t().createElement(v,{key:n,param:"default_rule",value:r.default_rule,min:r.min_rule,max:r.max_rule,metadata:l,onChange:e.props.onInputChange});case"api_target":return t().createElement(h,{key:n,param:"default_rule",value:r.default_rule,onChange:e.props.onInputChange});default:return null}})),e}return n=S,(r=[{key:"render",value:function(){var e=this,n=this.props,r=n.id,a=n.category,o=n.config,l=metadata;return console.log(o),t().createElement("div",{id:"".concat(r,"-card"),className:"mb-4 instance-card"},t().createElement("div",{className:"card"},t().createElement("div",{className:"card-body"},t().createElement("div",{className:"d-flex justify-content-between"},t().createElement("button",{className:"btn ps-2",style:{visibility:"hidden"}},t().createElement("i",{className:"bi-x-lg"})),t().createElement("h4",{className:"card-title mx-auto my-auto"},"".concat(r)),t().createElement("button",{className:"btn my-auto pe-2 delete",onClick:function(){return e.props.onDelete(r)}},t().createElement("i",{className:"bi-x-lg"}))),t().createElement("label",{className:"w-100"},t().createElement("b",null,"Type:"),t().createElement("select",{className:"form-select mt-2",value:o._type,required:!0,onChange:this.props.onTypeChange},t().createElement("option",{value:"clear"},"Select ",a," type"),Object.entries(l["".concat(a,"s")]).map((function(e){var n,r,a=(r=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,c=[],i=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(n,r)||function(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],l=a[1];return t().createElement("option",{key:o,value:l.config_name},l.class_name)})))),t().createElement("div",{id:"".concat(r,"-params"),className:"card-body"},this.renderInputs(r,o,a,l)))))}}])&&E(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),S}(t().Component),w=ReactTransitionGroup;var j=n(379),I=n.n(j),k=n(795),P=n.n(k),T=n(569),A=n.n(T),R=n(565),D=n.n(R),q=n(216),M=n.n(q),U=n(589),Z=n.n(U),z=n(222),F={};function L(e){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},L(e)}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,K(r.key),r)}}function G(e,t){return G=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},G(e,t)}function H(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function $(e,t,n){return(t=K(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e){var t=function(e,t){if("object"!==L(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!==L(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"===L(t)?t:String(t)}function Q(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,l,c=[],i=!0,u=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;i=!1}else for(;!(i=(r=o.call(n)).done)&&(c.push(r.value),c.length!==t);i=!0);}catch(e){u=!0,a=e}finally{try{if(!i&&null!=n.return&&(l=n.return(),Object(l)!==l))return}finally{if(u)throw a}}return c}}(e,t)||function(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function X(e,t){return Object.entries(e).reduce((function(e,n){var r=Q(n,2),a=r[0],o=r[1];return a.startsWith(t)&&(e[a]=o),e}),{})}F.styleTagTransform=Z(),F.setAttributes=D(),F.insert=A().bind(null,"head"),F.domAPI=P(),F.insertStyleElement=M(),I()(z.Z,F),z.Z&&z.Z.locals&&z.Z.locals;const Y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&G(e,t)}(c,e);var n,r,a,o,l=(a=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=W(a);if(o){var n=W(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return H(e)}(this,e)});function c(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),$(H(n=l.call(this,e)),"logState",(function(){console.log(n.state)})),$(H(n),"addInstance",(function(e){n.setState((function(t){var n=Object.keys(X(t,e)).length+1;return t["".concat(e).concat(n)]={},t}))})),$(H(n),"deleteInstance",(function(e){n.setState((function(t){return delete t[e],function(e,t){var n=e.replace(/[0-9]/g,""),r=e.replace(/[a-zA-Z]/g,""),a=X(t,n);if("device"===n){var o=X(t,"sensor");for(var l in o)t[l].targets=t[l].targets.filter((function(t){return t!==e}))}for(var c=function(){var e="".concat(n).concat(i),r="".concat(n).concat(i+1);if(t[e]=JSON.parse(JSON.stringify(t[r])),delete t[r],"device"===n)for(var a in o)t[a].targets.includes(r)&&(t[a].targets=t[a].targets.filter((function(e){return e!==r})),t[a].targets.push(e))},i=parseInt(r);i<Object.entries(a).length+1;i++)c();return t}(e,t)}))})),$(H(n),"changeInstanceType",(function(e,t,r){n.setState((function(n){var a=metadata["".concat(t,"s")][r.target.value].config_template;return n[e]=a,n}))})),$(H(n),"handleInputChange",(function(e,t,r){console.log(t),n.setState((function(n){return n[e][t]=r,n}))})),$(H(n),"renderLayout",(function(){var e=t().createElement(w.TransitionGroup,{className:"device-container"},Object.entries(n.state).filter((function(e){var t=Q(e,2),n=t[0];return t[1],n.startsWith("device")})).map((function(e){var r=Q(e,2),a=r[0],o=r[1];return t().createElement(w.CSSTransition,{key:a,timeout:500,classNames:"fade"},t().createElement(S,{key:a,id:a,category:"device",config:o,onDelete:function(){return n.deleteInstance(a)},onInputChange:function(e,t){return n.handleInputChange(a,e,t)},onTypeChange:function(e){return n.changeInstanceType(a,"device",e)}}))}))),r=t().createElement(w.TransitionGroup,{className:"sensor-container"},Object.entries(n.state).filter((function(e){var t=Q(e,2),n=t[0];return t[1],n.startsWith("sensor")})).map((function(e){var r=Q(e,2),a=r[0],o=r[1];return t().createElement(w.CSSTransition,{key:a,timeout:500,classNames:"fade"},t().createElement(S,{key:a,id:a,category:"sensor",config:o,onDelete:function(){return n.deleteInstance(a)},onInputChange:function(e,t){return n.handleInputChange(a,e,t)},onTypeChange:function(e){return n.changeInstanceType(a,"sensor",e)}}))})));return t().createElement(t().Fragment,null,t().createElement("h1",{className:"text-center pt-3 pb-4"},"TEST"),t().createElement("div",{id:"page1",className:"d-flex flex-column h-100"},t().createElement("div",{className:"row mt-3"},t().createElement("div",{id:"sensors",className:"col-sm"},t().createElement("h2",{className:"text-center"},"Add Sensors"),r,t().createElement("div",{id:"add_sensor",className:"text-center position-relative"},t().createElement("button",{className:"btn-secondary btn mb-3",onClick:function(){return n.addInstance("sensor")}},"Add Sensor"))),t().createElement("div",{id:"devices",className:"col-sm"},t().createElement("h2",{className:"text-center"},"Add Devices"),e,t().createElement("div",{id:"add_device",className:"text-center position-relative"},t().createElement("button",{className:"btn-secondary btn mb-3",onClick:function(){return n.addInstance("device")}},"Add Device"))))),t().createElement("div",{className:"bottom"},t().createElement("button",{className:"log-button",onClick:function(){return n.logState()}},"Log State")))})),n.state={metadata:{},wifi:{}},n}return n=c,r=[{key:"componentDidMount",value:function(){var e=JSON.parse(document.getElementById("config").textContent);console.log(e),e&&this.setState(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){$(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},{key:"render",value:function(){return this.renderLayout()}}],r&&J(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),c}(t().Component);a().render(t().createElement(Y,null),document.getElementById("root"))})()})();